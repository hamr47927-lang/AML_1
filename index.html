<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù‡Ø¯ÙŠØ© ÙƒØ±ÙŠØ³Ù…Ø§Ø³ â¤ï¸</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --main-pink: #ff4d6d; --dark-pink: #c9184a; --gold: #ffd700; --scan-color: #00ffcc; --christmas-green: #228B22; --christmas-red: #DC143C; }
        * { touch-action: manipulation; box-sizing: border-box; }
        body { margin: 0; background: radial-gradient(circle, #fff0f3 0%, #ffc1cf 100%); display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Segoe UI', sans-serif; overflow: hidden; position: relative; }
        
        .snowflake { position: absolute; color: white; font-size: 20px; top: -20px; animation: fall 10s linear infinite; pointer-events: none; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        .container { width: 92%; max-width: 380px; text-align: center; background: rgba(255, 255, 255, 0.95); padding: 25px; border-radius: 40px; box-shadow: 0 20px 50px rgba(255, 77, 109, 0.2); z-index: 10; }
        
        .section { display: none; }
        .active { display: block; animation: fadeIn 0.8s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; } }

        /* Ø´Ø¬Ø±Ø© Ø§Ù„ÙƒØ±ÙŠØ³Ù…Ø§Ø³ */
        .christmas-tree { position: relative; width: 120px; height: 120px; margin: 20px auto; border: 4px dashed var(--christmas-green); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .inner-tree { font-size: 50px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        /* Ø§Ù„Ø£Ù„Ø¨ÙˆÙ… */
        .album-container { width: 200px; height: 250px; margin: 15px auto; perspective: 1000px; }
        .photo-frame { width: 100%; height: 100%; border: 5px solid white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); overflow: hidden; background: #eee; }
        .photo-frame img { width: 100%; height: 100%; object-fit: cover; }

        /* Ø§Ù„Ø¨ØµÙ…Ø© */
        .fp-wrapper { position: relative; width: 100px; height: 100px; margin: 20px auto; cursor: pointer; }
        .scan-line { position: absolute; width: 100%; height: 4px; background: var(--scan-color); top: 0; display: none; }
        .scanning .scan-line { display: block; animation: scan 1.5s linear infinite; }
        @keyframes scan { 50% { top: 100%; } }

        /* Ø§Ù„Ù‡Ø¯ÙŠØ© */
        .gift-box { position: relative; width: 100px; height: 100px; margin: 20px auto; cursor: pointer; }
        .gift-box .lid { position: absolute; top: 0; width: 100%; height: 25%; background: var(--christmas-red); border: 2px solid white; z-index: 2; transition: 0.5s; }
        .gift-box .box { position: absolute; bottom: 0; width: 100%; height: 75%; background: var(--christmas-green); border: 2px solid white; }
        .gift-box.open .lid { transform: translateY(-50px) rotate(-10deg); opacity: 0; }

        button { background: linear-gradient(145deg, var(--christmas-red), var(--christmas-green)); color: white; border: none; padding: 15px; border-radius: 20px; width: 90%; font-weight: bold; cursor: pointer; margin-top: 15px; }
        
        #black-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: white; z-index: 10000; display: none; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; }
    </style>
</head>
<body>

    <div class="container">
        <div id="s0" class="section active">
            <h3 style="color: var(--christmas-red)">Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙŠØ§ Ø­Ø¨ÙŠØ¨ØªÙŠ â¤ï¸</h3>
            <div class="fp-wrapper" id="fp-area" onmousedown="startScan()" onmouseup="stopScan()" ontouchstart="startScan()" ontouchend="stopScan()">
                <div class="scan-line"></div>
                <div style="font-size: 80px; color: var(--christmas-red);"><i class="fas fa-fingerprint"></i></div>
            </div>
            <p>Ø§Ø¶ØºØ·ÙŠ Ø¨ØµÙ…ØªÙƒ Ù‡Ù†Ø§ Ù„Ù„Ø¯Ø®ÙˆÙ„.. â„ï¸</p>
        </div>

        <div id="s1" class="section">
            <h3 style="color: var(--christmas-red)">Ø£Ø«Ø¨ØªÙŠ Ù‡ÙˆÙŠØªÙƒ ğŸ…</h3>
            <p>Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙØ¶Ù„ Ù„Ù†Ø§ØŸ</p>
            <input type="password" id="pw" style="width:80%; padding:10px; border-radius:10px; text-align:center;" placeholder="Ø£Ø¯Ø®Ù„ÙŠ Ø§Ù„Ø³Ù†Ø© Ù…Ø«Ù„Ø§Ù‹">
            <button onclick="checkPW()">Ø¯Ø®ÙˆÙ„ ğŸ„</button>
        </div>

        <div id="s2" class="section">
            <h3 style="color: var(--christmas-red)">Ø¯ÙˆØ³ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¬Ø±Ø© 3 Ù…Ø±Ø§Øª âœ¨</h3>
            <div class="christmas-tree" onclick="treeClick()">
                <div class="inner-tree">ğŸ„</div>
            </div>
            <p id="tree-count">Ù…Ø±Ø§Øª Ø§Ù„Ø¶ØºØ·: 0</p>
        </div>

        <div id="s3" class="section">
            <h3 style="color: var(--christmas-red)">Ø°ÙƒØ±ÙŠØ§ØªÙ†Ø§ â¤ï¸</h3>
            <div class="photo-frame">
                <img id="memory-img" src="https://via.placeholder.com/200x250?text=Photo+1" alt="Ø°ÙƒØ±Ù‰">
            </div>
            <p id="photo-cap">Ø£Ø­Ù„Ù‰ Ø£ÙŠØ§Ù…Ù†Ø§ Ø³ÙˆØ§..</p>
            <button onclick="nextPhoto()">Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© âœ¨</button>
            <button id="gift-btn" style="display:none; background: gold; color: black;" onclick="goToGift()">Ø§ÙØªØ­ÙŠ Ù‡Ø¯ÙŠØªÙƒ ğŸ</button>
        </div>

        <div id="s4" class="section">
            <h3 style="color: var(--christmas-red)">Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ğŸ</h3>
            <div class="gift-box" id="giftBox" onclick="openGift()">
                <div class="lid"></div>
                <div class="box"></div>
            </div>
        </div>
    </div>

    <div id="black-screen">
        <h1 style="color: gold;">ÙƒÙ„ Ø³Ù†Ø© ÙˆØ£Ù†ØªÙ Ø·ÙŠØ¨Ø© â¤ï¸</h1>
        <p id="final-msg" style="font-size: 1.2rem;"></p>
        <button onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ğŸ”„</button>
    </div>

    <script>
        // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø«Ù„Ø¬
        for (let i = 0; i < 30; i++) {
            let snow = document.createElement('div');
            snow.className = 'snowflake';
            snow.innerHTML = 'â„ï¸';
            snow.style.left = Math.random() * 100 + 'vw';
            snow.style.animationDelay = Math.random() * 5 + 's';
            document.body.appendChild(snow);
        }

        let scanTimer;
        function startScan() {
            document.getElementById('fp-area').classList.add('scanning');
            scanTimer = setTimeout(() => {
                nextSection(1);
            }, 2000);
        }
        function stopScan() {
            clearTimeout(scanTimer);
            document.getElementById('fp-area').classList.remove('scanning');
        }

        function checkPW() {
            const pw = document.getElementById('pw').value;
            if(pw === "2024") { // ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù‡Ù†Ø§
                nextSection(2);
            } else {
                alert("Ø­Ø§ÙˆÙ„ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙŠØ§ Ø±ÙˆØ­ÙŠ (ØªÙ„Ù…ÙŠØ­: Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©)");
            }
        }

        let clicks = 0;
        function treeClick() {
            clicks++;
            document.getElementById('tree-count').innerText = `Ù…Ø±Ø§Øª Ø§Ù„Ø¶ØºØ·: ${clicks}`;
            confetti({ particleCount: 30, origin: { y: 0.7 } });
            if(clicks >= 3) {
                nextSection(3);
            }
        }

        let photoIndex = 0;
        const photos = [
            {src: "https://via.placeholder.com/200x250?text=Memory+1", cap: "Ø£ÙˆÙ„ ÙŠÙˆÙ… ØªÙ‚Ø§Ø¨Ù„Ù†Ø§ ÙÙŠÙ‡ â¤ï¸"},
            {src: "https://via.placeholder.com/200x250?text=Memory+2", cap: "Ø£Ø­Ù„Ù‰ Ø¶Ø­ÙƒØ© Ø´ÙØªÙ‡Ø§ âœ¨"}
        ];

        function nextPhoto() {
            photoIndex++;
            if(photoIndex < photos.length) {
                document.getElementById('memory-img').src = photos[photoIndex].src;
                document.getElementById('photo-cap').innerText = photos[photoIndex].cap;
            } else {
                document.getElementById('gift-btn').style.display = "block";
            }
        }

        function goToGift() { nextSection(4); }

        function openGift() {
            document.getElementById('giftBox').classList.add('open');
            confetti({ particleCount: 150, spread: 70 });
            setTimeout(() => {
                document.getElementById('black-screen').style.display = 'flex';
                typeWriter("Ø£Ù†ØªÙ Ù„Ø³ØªÙ ÙÙ‚Ø· Ø­Ø¨ÙŠØ¨ØªÙŠØŒ Ø£Ù†ØªÙ Ø¹ÙŠØ¯ÙŠ ÙˆÙƒÙ„ Ø¯Ù†ÙŠØªÙŠ.. ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ Ø¨Ù‚Ù„Ø¨ÙŠ â¤ï¸");
            }, 1000);
        }

        function nextSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('s'+id).classList.add('active');
        }

        function typeWriter(text) {
            let i = 0;
            let target = document.getElementById('final-msg');
            target.innerHTML = "";
            function type() {
                if (i < text.length) {
                    target.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, 100);
                }
            }
            type();
        }
    </script>
</body>
</html>
